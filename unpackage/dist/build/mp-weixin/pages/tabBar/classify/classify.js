"use strict";const t=require("../../../common/vendor.js"),e={components:{},onShareAppMessage:t=>("button"===t.from&&console.log(t.target),{title:"瑶一瑶小可爱的表情包",path:"pages/tabBar/home/home"}),data:()=>({banner_info:[{url:"https://mmbiz.qpic.cn/mmbiz_png/NiaDlMDtNVMFaABHQ9n9F0FISFrJF1bcIrS3S5FQ2cHYjqmJBWia18r0o82iccp1tk3vnTjMb7OvjxOhLfX6K2vicA/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1"}],modeIndex:-1,styleIndex:-1,current:0,mode:"default",dotsStyles:{},swiperDotIndex:0,title:"uni-fab",pattern:{color:"#7A7E83",backgroundColor:"#fff",selectedColor:"#7A7E83",buttonColor:"#fff",iconColor:"#fff"},content:[{iconPath:"/static/pin.png",selectedIconPath:"/static/pin.png",text:"标记页面",active:!1},{iconPath:"/static/skip.png",selectedIconPath:"/static/skip.png",text:"前往标记",active:!1},{iconPath:"/static/arrow-left-circle.png",selectedIconPath:"/static/arrow-left-circle.png",text:"首页",active:!1}],listItems:["开心","伤心","生气","其他"],currentItem:0,currentEType:1,dynamicList0:[],dynamicList1:[],dynamicList2:[],dynamicList3:[],pageSize:12,currentPage0:1,totalPageNum0:50,currentPage1:1,totalPageNum1:50,currentPage2:1,totalPageNum2:50,currentPage3:1,totalPageNum3:50,currentSort0:1,currentSort1:1,currentSort2:1,currentSort3:1}),onLoad(){this.currentItem=0,this.loadThisListAllBQB()},methods:{clickBannerItem(t){this.swiperDotIndex=t},shareImg(e){console.log(e),t.index.showLoading({title:"下载中..."}),t.wx$1.downloadFile({url:e,success:e=>{t.index.hideLoading(),t.wx$1.showShareImageMenu({path:e.tempFilePath})},fail:t=>{console.log("downloadFile fail, err is:",t)}})},getETypeByListNum:function(t){0==t?this.currentEType=1:1==t?this.currentEType=2:2==t?this.currentEType=3:3==t&&(this.currentEType=4)},getCurrentSortCacheByListNum:function(e,r){let n="";0==r?n="current_sort_key_0":1==r?n="current_sort_key_1":2==r?n="current_sort_key_2":3==r&&(n="current_sort_key_3"),t.index.getStorage({key:n,success:function(t){console.log("currentSortKey:",t.data),0==r?e.currentSort0=t.data:1==r?e.currentSort1=t.data:2==r?e.currentSort2=t.data:3==r&&(e.currentSort3=t.data)}})},loadThisListTotalPageNum:function(e){this.getETypeByListNum(e),this.getCurrentSortCacheByListNum(this,e);t.Ds.database().collection("kids_emoticon").where("k_type==1").where("e_type=="+this.currentEType).count().then((t=>{console.log("当前表情包类型总数量"),console.log(t.result.total),0==e?this.totalPageNum0=t.result.total:1==e?this.totalPageNum1=t.result.total:2==e?this.totalPageNum2=t.result.total:3==e&&(this.totalPageNum3=t.result.total)})).catch((t=>{console.log(t)}))},changeFabStyle:function(t){0==t?(this.pattern.buttonColor="#fbff65",this.pattern.iconColor="#9ea3ab"):1==t?(this.pattern.buttonColor="#5c6bff",this.pattern.iconColor="#fff"):2==t?(this.pattern.buttonColor="#fd636c",this.pattern.iconColor="#fff"):3==t&&(this.pattern.buttonColor="#fd80f4",this.pattern.iconColor="#fff")},jumpPage:function(){console.log("===========jumpPage==============");let e=this.pageSize,r=this.currentPage0;this.getETypeByListNum(this.currentItem),1==this.currentItem?r=this.currentPage1:2==this.currentItem?r=this.currentPage2:3==this.currentItem&&(r=this.currentPage3);let n=e*(r-1);t.Ds.database().collection("kids_emoticon").where("k_type==1").where("e_type=="+this.currentEType).skip(n).limit(e).orderBy("create_time desc").get().then((t=>{console.log(t);let n=0,o=[];0==t.result.data.length?n=e*(r-1):(t.result.data.length<e&&(n=e*r),console.log(t),o=[],t.result.data.forEach(((t,e)=>{o.push({url:t.e_url})}))),0==this.currentItem?(n>0&&(this.totalPageNum0=n),this.dynamicList0=o):1==this.currentItem?(n>0&&(this.totalPageNum1=n),this.dynamicList1=o):2==this.currentItem?(n>0&&(this.totalPageNum2=n),this.dynamicList2=o):3==this.currentItem&&(n>0&&(this.totalPageNum3=n),this.dynamicList3=o)})).catch((t=>{console.log(t)}))},loadThisListAllBQB:function(){let t=!1;0==this.currentItem&&0==this.dynamicList0.length?(this.currentPage0=1,t=!0):1==this.currentItem&&0==this.dynamicList1.length?(this.currentPage1=1,t=!0):2==this.currentItem&&0==this.dynamicList2.length?(this.currentPage2=1,t=!0):3==this.currentItem&&0==this.dynamicList3.length&&(this.currentPage3=1,t=!0),t&&(this.getETypeByListNum(this.currentItem),this.jumpPage(),this.loadThisListTotalPageNum(this.currentItem),this.changeFabStyle(this.currentItem))},onClickItem(t){this.currentItem!==t.currentIndex&&(this.currentItem=t.currentIndex),this.changeFabStyle(this.currentItem),this.loadThisListAllBQB()},changePage(t){console.log(t),0==this.currentItem?this.currentPage0=t.current:1==this.currentItem?this.currentPage1=t.current:2==this.currentItem?this.currentPage2=t.current:3==this.currentItem&&(this.currentPage3=t.current),this.jumpPage()},trigger(e){console.log(e),this.content[e.index].active=!e.item.active;let r="确定前往首页吗？";"标记页面"==e.item.text?r="确定标记当前页面吗？":"前往标记"==e.item.text&&(r="确定前往上次标记的页面吗？");let n=this;t.index.showModal({title:"提示",content:r,success:function(r){if(r.confirm)if(console.log("用户点击确定"),"标记页面"==e.item.text){let e=n.getCurrentSortCacheByListNum(n,n.currentItem),r=0;0==n.currentItem?(n.currentSort0=n.currentPage0,r=n.currentPage0):1==n.currentItem?(n.currentSort1=n.currentPage1,r=n.currentPage1):2==n.currentItem?(n.currentSort2=n.currentPage2,r=n.currentPage2):3==n.currentItem&&(n.currentSort3=n.currentPage3,r=n.currentPage3),t.index.setStorage({key:e,data:r,success:function(){console.log("setStorage success")}}),console.log("缓存当前页"+r)}else"前往标记"==e.item.text?(0==n.currentItem?n.currentPage0=n.currentSort0:1==n.currentItem?n.currentPage1=n.currentSort1:2==n.currentItem?n.currentPage2=n.currentSort2:3==n.currentItem&&(n.currentPage3=n.currentSort3),n.jumpPage()):"首页"==e.item.text&&(0==n.currentItem?n.currentPage0=1:1==n.currentItem?n.currentPage1=1:2==n.currentItem?n.currentPage2=1:3==n.currentItem&&(n.currentPage3=1),n.jumpPage());else r.cancel&&console.log("用户点击取消")}})}}};if(!Array){(t.resolveComponent("uni-swiper-dot")+t.resolveComponent("uni-fab")+t.resolveComponent("uni-segmented-control")+t.resolveComponent("uni-icons")+t.resolveComponent("uni-grid-item")+t.resolveComponent("uni-grid")+t.resolveComponent("uni-pagination"))()}Math||((()=>"../../../uni_modules/uni-swiper-dot/components/uni-swiper-dot/uni-swiper-dot.js")+(()=>"../../../uni_modules/uni-fab/components/uni-fab/uni-fab.js")+(()=>"../../../uni_modules/uni-segmented-control/components/uni-segmented-control/uni-segmented-control.js")+(()=>"../../../uni_modules/uni-icons/components/uni-icons/uni-icons.js")+(()=>"../../../uni_modules/uni-grid/components/uni-grid-item/uni-grid-item.js")+(()=>"../../../uni_modules/uni-grid/components/uni-grid/uni-grid.js")+(()=>"../../../uni_modules/uni-pagination/components/uni-pagination/uni-pagination.js"))();const r=t._export_sfc(e,[["render",function(e,r,n,o,i,c){return t.e({a:t.f(i.banner_info,((t,e,r)=>({a:t.url,b:e}))),b:t.o(((...t)=>e.changeBanner&&e.changeBanner(...t))),c:i.swiperDotIndex,d:t.o(c.clickBannerItem),e:t.p({current:i.current,mode:i.mode}),f:t.sr("fab","ff7d0134-1"),g:t.o(c.trigger),h:t.p({horizontal:"right",vertical:"top",direction:"vertical",pattern:i.pattern,content:i.content}),i:t.o(c.onClickItem),j:t.p({current:i.currentItem,values:i.listItems,"style-type":"text","active-color":"#feb817"}),k:0===i.currentItem},0===i.currentItem?{l:t.f(i.dynamicList0,((e,r,n)=>({a:e.url,b:t.o((t=>c.shareImg(e.url)),r),c:"ff7d0134-5-"+n+",ff7d0134-4-"+n,d:r,e:"ff7d0134-4-"+n+",ff7d0134-3",f:t.p({index:r})}))),m:t.p({type:"download-filled",size:"20",color:"#feb817"}),n:t.p({column:3,"show-border":!1,square:!1}),o:t.o(c.changePage),p:t.p({total:i.totalPageNum0,pageSize:i.pageSize,current:i.currentPage0,title:"分页"})}:{},{q:1===i.currentItem},1===i.currentItem?{r:t.f(i.dynamicList1,((e,r,n)=>({a:e.url,b:t.o((t=>c.shareImg(e.url)),r),c:"ff7d0134-9-"+n+",ff7d0134-8-"+n,d:r,e:"ff7d0134-8-"+n+",ff7d0134-7",f:t.p({index:r})}))),s:t.p({type:"download-filled",size:"20",color:"#feb817"}),t:t.p({column:3,"show-border":!1,square:!1}),v:t.o(c.changePage),w:t.p({total:i.totalPageNum1,pageSize:i.pageSize,current:i.currentPage1,title:"分页"})}:{},{x:2===i.currentItem},2===i.currentItem?{y:t.f(i.dynamicList2,((e,r,n)=>({a:e.url,b:t.o((t=>c.shareImg(e.url)),r),c:"ff7d0134-13-"+n+",ff7d0134-12-"+n,d:r,e:"ff7d0134-12-"+n+",ff7d0134-11",f:t.p({index:r})}))),z:t.p({type:"download-filled",size:"20",color:"#feb817"}),A:t.p({column:3,"show-border":!1,square:!1}),B:t.o(c.changePage),C:t.p({total:i.totalPageNum2,pageSize:i.pageSize,current:i.currentPage2,title:"分页"})}:{},{D:3===i.currentItem},3===i.currentItem?{E:t.f(i.dynamicList3,((e,r,n)=>({a:e.url,b:t.o((t=>c.shareImg(e.url)),r),c:"ff7d0134-17-"+n+",ff7d0134-16-"+n,d:r,e:"ff7d0134-16-"+n+",ff7d0134-15",f:t.p({index:r})}))),F:t.p({type:"download-filled",size:"20",color:"#feb817"}),G:t.p({column:3,"show-border":!1,square:!1}),H:t.o(c.changePage),I:t.p({total:i.totalPageNum3,pageSize:i.pageSize,current:i.currentPage3,title:"分页"})}:{})}]]);e.__runtimeHooks=2,wx.createPage(r);
